# tishi v1.0 — Pipeline runner (no persistent services)
# Usage: docker compose run --rm tishi scrape
#        docker compose run --rm tishi pipeline (scrape → score → analyze → push)

services:
  tishi:
    build:
      context: .
      args:
        VERSION: ${VERSION:-dev}
    volumes:
      - ./data:/data
      - ./config.yaml:/config.yaml:ro
    environment:
      TISHI_DATA_DIR: /data
      TISHI_GITHUB_TOKENS: ${GITHUB_TOKENS:-}
      TISHI_LLM_API_KEY: ${TISHI_LLM_API_KEY:-}
      TISHI_LLM_PROVIDER: ${TISHI_LLM_PROVIDER:-deepseek}
      LOG_LEVEL: ${LOG_LEVEL:-info}
    entrypoint: [ "/tishi" ]
    command: [ "--help" ]
